<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>forester tutorial • forester</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- dalexverse --><link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="forester tutorial">
<meta property="og:description" content="forester">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">forester</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy" class="external-link">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/" class="external-link">MI^2 DataLab</a> </span>
          <span class="version version-default">1.0.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Tutorial.html">forester tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/forester/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>forester tutorial</h1>
                        <h4 data-toc-skip class="author">Hubert
Ruczyński</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ModelOriented/forester/blob/HEAD/vignettes/Tutorial.Rmd" class="external-link"><code>vignettes/Tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>Tutorial.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="forester">forester<a class="anchor" aria-label="anchor" href="#forester"></a>
</h2>
<p>In this short tutorial you will get to know how to use the forester
<code>package</code>. First of all, you don’t need any initial knowledge
to benefit from computational power of the tree-based models, because
forester can do every crucial step for you.</p>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The data set used in our tutorial is called <code>lisbon</code> It
contains 17 columns with both numerical and categorical data about real
estates in Lisbon. Our target here is a <code>Price</code> column and
the task is the regression. The only thing we need to start working with
this task is the <code>forester</code> package, however to explain the
model we will also use <code>DALEX</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://modeloriented.github.io/DALEX/" class="external-link">DALEX</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ModelOriented/forester" class="external-link">forester</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'lisbon'</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">lisbon</span>, <span class="fl">10</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"markdown"</span>, digits <span class="op">=</span> <span class="fl">3</span>, align <span class="op">=</span> <span class="st">'c'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="5%">
<col width="7%">
<col width="8%">
<col width="5%">
<col width="5%">
<col width="4%">
<col width="5%">
<col width="4%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="7%">
<col width="12%">
<col width="5%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="center">Id</th>
<th align="center">Condition</th>
<th align="center">PropertyType</th>
<th align="center">PropertySubType</th>
<th align="center">Bedrooms</th>
<th align="center">Bathrooms</th>
<th align="center">AreaNet</th>
<th align="center">AreaGross</th>
<th align="center">Parking</th>
<th align="center">Latitude</th>
<th align="center">Longitude</th>
<th align="center">Country</th>
<th align="center">District</th>
<th align="center">Municipality</th>
<th align="center">Parish</th>
<th align="center">Price.M2</th>
<th align="center">Price</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">101</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">76</td>
<td align="center">152</td>
<td align="center">0</td>
<td align="center">38.779</td>
<td align="center">-9.119</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Olivais</td>
<td align="center">2463</td>
<td align="center">198000</td>
</tr>
<tr class="even">
<td align="center">102</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Duplex</td>
<td align="center">5</td>
<td align="center">3</td>
<td align="center">190</td>
<td align="center">380</td>
<td align="center">0</td>
<td align="center">38.706</td>
<td align="center">-9.178</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Alcantara</td>
<td align="center">3125</td>
<td align="center">1270000</td>
</tr>
<tr class="odd">
<td align="center">103</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">26</td>
<td align="center">52</td>
<td align="center">0</td>
<td align="center">38.706</td>
<td align="center">-9.164</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Estrela</td>
<td align="center">4005</td>
<td align="center">140000</td>
</tr>
<tr class="even">
<td align="center">104</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">5</td>
<td align="center">4</td>
<td align="center">185</td>
<td align="center">370</td>
<td align="center">0</td>
<td align="center">38.747</td>
<td align="center">-9.164</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Sao Domingos de Benfica</td>
<td align="center">3412</td>
<td align="center">995000</td>
</tr>
<tr class="odd">
<td align="center">105</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">7</td>
<td align="center">1</td>
<td align="center">150</td>
<td align="center">300</td>
<td align="center">0</td>
<td align="center">38.732</td>
<td align="center">-9.129</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Arroios</td>
<td align="center">3277</td>
<td align="center">570000</td>
</tr>
<tr class="even">
<td align="center">106</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">95</td>
<td align="center">190</td>
<td align="center">0</td>
<td align="center">38.696</td>
<td align="center">-9.210</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Belem</td>
<td align="center">3542</td>
<td align="center">425000</td>
</tr>
<tr class="odd">
<td align="center">107</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">76</td>
<td align="center">152</td>
<td align="center">0</td>
<td align="center">38.754</td>
<td align="center">-9.113</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Marvila</td>
<td align="center">2881</td>
<td align="center">130000</td>
</tr>
<tr class="even">
<td align="center">108</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">81</td>
<td align="center">162</td>
<td align="center">0</td>
<td align="center">38.756</td>
<td align="center">-9.180</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Sao Domingos de Benfica</td>
<td align="center">3412</td>
<td align="center">215000</td>
</tr>
<tr class="odd">
<td align="center">109</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">58</td>
<td align="center">116</td>
<td align="center">0</td>
<td align="center">38.779</td>
<td align="center">-9.119</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Olivais</td>
<td align="center">2463</td>
<td align="center">196000</td>
</tr>
<tr class="even">
<td align="center">110</td>
<td align="center">Used</td>
<td align="center">Homes</td>
<td align="center">Apartment</td>
<td align="center">5</td>
<td align="center">3</td>
<td align="center">286</td>
<td align="center">572</td>
<td align="center">0</td>
<td align="center">38.763</td>
<td align="center">-9.169</td>
<td align="center">Portugal</td>
<td align="center">Lisboa</td>
<td align="center">Lisboa</td>
<td align="center">Lumiar</td>
<td align="center">2927</td>
<td align="center">925000</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="train-method">Train method<a class="anchor" aria-label="anchor" href="#train-method"></a>
</h3>
<p>The main function inside the package is <code><a href="../reference/train.html">train()</a></code>
function. It needs only two parameters to work: <code>data</code> and
<code>y</code>, which are the data set and target column name. This
method automatically checks the data set for possible issues, fixes the
ones that are needed for models to be built in preprocessing process and
trains the models with basic parameters, randomly searched parameters,
and the ones chosen by Bayesian optimization. It returns an advanced
object, but the most important for casual users is the ranked list of
all trained models sorted from the best one to the worst. Moreover, it
prints out what is currently happening during the whole process.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">train_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/train.html">train</a></span><span class="op">(</span><span class="va">lisbon</span>, </span>
<span>                      <span class="st">'Price'</span>, </span>
<span>                      engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ranger'</span>, <span class="st">'xgboost'</span>, <span class="st">'decision_tree'</span>, <span class="st">'lightgbm'</span><span class="op">)</span>, </span>
<span>                      bayes_iter <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                      random_iter <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                      advanced_preprocessing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Type guessed as:  regression </span></span>
<span><span class="co">##  -------------------- CHECK DATA REPORT -------------------- </span></span>
<span><span class="co">##  </span></span>
<span><span class="co">## The dataset has 246 observations and 17 columns, which names are: </span></span>
<span><span class="co">## Id; Condition; PropertyType; PropertySubType; Bedrooms; Bathrooms; AreaNet; AreaGross; Parking; Latitude; Longitude; Country; District; Municipality; Parish; Price.M2; Price; </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## With the target value described by a column Price.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Static columns are: </span></span>
<span><span class="co">## Country; District; Municipality; </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## With dominating values: </span></span>
<span><span class="co">## Portugal; Lisboa; Lisboa; </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## These column pairs are duplicate:</span></span>
<span><span class="co">##  District - Municipality; </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No target values are missing. </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No predictor values are missing. </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No issues with dimensionality. </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Strongly correlated pairs of numerical values are: </span></span>
<span><span class="co">##  </span></span>
<span><span class="co">## Bedrooms - AreaNet: 0.77;</span></span>
<span><span class="co">## Bedrooms - AreaGross: 0.77;</span></span>
<span><span class="co">## Bathrooms - AreaNet: 0.78;</span></span>
<span><span class="co">## Bathrooms - AreaGross: 0.78;</span></span>
<span><span class="co">## AreaNet - AreaGross: 1;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Strongly correlated pairs of categorical values are: </span></span>
<span><span class="co">## PropertyType - PropertySubType: 1;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## These obserwation migth be outliers due to their numerical columns values: </span></span>
<span><span class="co">##  145 146 196 44 5 51 57 58 59 60 61 62 63 64 69 75 76 77 78 ;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Target data is not evenly distributed with quantile bins: 0.25 0.35 0.14 0.26 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Columns names suggest that some of them are IDs, removing them can improve the model.</span></span>
<span><span class="co">##  Suspicious columns are: Id .</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Columns data suggest that some of them are IDs, removing them can improve the model.</span></span>
<span><span class="co">##  Suspicious columns are: Id .</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  -------------------- CHECK DATA REPORT END -------------------- </span></span>
<span><span class="co">##  </span></span>
<span><span class="co">## Data preprocessed. </span></span>
<span><span class="co">## Data splitted and balanced </span></span>
<span><span class="co">## Correct formats prepared </span></span>
<span><span class="co">## Models sucsesfully trained </span></span>
<span><span class="co">## Predicted Successfully</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">train_output</span><span class="op">$</span><span class="va">ranked_list</span>, format <span class="op">=</span> <span class="st">'markdown'</span>, digits <span class="op">=</span> <span class="fl">3</span>, format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">','</span>, scientific <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, align <span class="op">=</span> <span class="st">'c'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="26%">
<col width="21%">
<col width="13%">
<col width="10%">
<col width="15%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">engine</th>
<th align="center">mse</th>
<th align="center">rmse</th>
<th align="center">r2</th>
<th align="center">mad</th>
<th align="center">mae</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">ranger_model</td>
<td align="center">47,298,700,389</td>
<td align="center">217,482.6</td>
<td align="center">0.656</td>
<td align="center">93,555.41</td>
<td align="center">147,977.6</td>
</tr>
<tr class="even">
<td align="center">ranger_bayes</td>
<td align="center">47,298,700,389</td>
<td align="center">217,482.6</td>
<td align="center">0.656</td>
<td align="center">93,555.41</td>
<td align="center">147,977.6</td>
</tr>
<tr class="odd">
<td align="center">ranger_RS_1</td>
<td align="center">48,639,136,636</td>
<td align="center">220,542.8</td>
<td align="center">0.646</td>
<td align="center">137,218.06</td>
<td align="center">162,907.7</td>
</tr>
<tr class="even">
<td align="center">ranger_RS_2</td>
<td align="center">51,186,994,083</td>
<td align="center">226,245.4</td>
<td align="center">0.627</td>
<td align="center">116,248.97</td>
<td align="center">158,544.7</td>
</tr>
<tr class="odd">
<td align="center">decision_tree_model</td>
<td align="center">58,321,813,518</td>
<td align="center">241,499.1</td>
<td align="center">0.575</td>
<td align="center">118,318.18</td>
<td align="center">177,546.8</td>
</tr>
<tr class="even">
<td align="center">decision_tree_RS_1</td>
<td align="center">58,321,813,518</td>
<td align="center">241,499.1</td>
<td align="center">0.575</td>
<td align="center">118,318.18</td>
<td align="center">177,546.8</td>
</tr>
<tr class="odd">
<td align="center">decision_tree_RS_2</td>
<td align="center">58,321,813,518</td>
<td align="center">241,499.1</td>
<td align="center">0.575</td>
<td align="center">118,318.18</td>
<td align="center">177,546.8</td>
</tr>
<tr class="even">
<td align="center">decision_tree_bayes</td>
<td align="center">58,321,813,518</td>
<td align="center">241,499.1</td>
<td align="center">0.575</td>
<td align="center">118,318.18</td>
<td align="center">177,546.8</td>
</tr>
<tr class="odd">
<td align="center">xgboost_model</td>
<td align="center">60,497,662,450</td>
<td align="center">245,962.7</td>
<td align="center">0.559</td>
<td align="center">58,368.97</td>
<td align="center">133,977.5</td>
</tr>
<tr class="even">
<td align="center">xgboost_bayes</td>
<td align="center">60,497,662,450</td>
<td align="center">245,962.7</td>
<td align="center">0.559</td>
<td align="center">58,368.97</td>
<td align="center">133,977.5</td>
</tr>
<tr class="odd">
<td align="center">lightgbm_model</td>
<td align="center">74,200,602,981</td>
<td align="center">272,397.9</td>
<td align="center">0.460</td>
<td align="center">133,146.67</td>
<td align="center">182,202.0</td>
</tr>
<tr class="even">
<td align="center">lightgbm_bayes</td>
<td align="center">74,200,602,981</td>
<td align="center">272,397.9</td>
<td align="center">0.460</td>
<td align="center">133,146.67</td>
<td align="center">182,202.0</td>
</tr>
<tr class="odd">
<td align="center">lightgbm_RS_2</td>
<td align="center">77,094,238,657</td>
<td align="center">277,658.5</td>
<td align="center">0.439</td>
<td align="center">112,441.66</td>
<td align="center">182,776.0</td>
</tr>
<tr class="even">
<td align="center">lightgbm_RS_1</td>
<td align="center">85,773,130,834</td>
<td align="center">292,870.5</td>
<td align="center">0.375</td>
<td align="center">168,495.53</td>
<td align="center">214,234.1</td>
</tr>
<tr class="odd">
<td align="center">xgboost_RS_1</td>
<td align="center">97,270,575,639</td>
<td align="center">311,882.3</td>
<td align="center">0.292</td>
<td align="center">122,740.69</td>
<td align="center">207,121.6</td>
</tr>
<tr class="even">
<td align="center">xgboost_RS_2</td>
<td align="center">156,497,687,240</td>
<td align="center">395,597.9</td>
<td align="center">-0.140</td>
<td align="center">225,860.77</td>
<td align="center">295,320.2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="explanations">Explanations<a class="anchor" aria-label="anchor" href="#explanations"></a>
</h3>
<p>To access a single model the user has to get to the models_list and
then choose the exact models that interest him. As we want to create a
<code>DALEX explainer</code> and Feature Importance plot, as an example
we will use the first model <code>xgboost</code>, because unfortunately,
we are unable to create this visualization for catboost models yet.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu">forester</span><span class="fu">::</span><span class="fu"><a href="../reference/explain.html">explain</a></span><span class="op">(</span>models <span class="op">=</span> <span class="va">train_output</span><span class="op">$</span><span class="va">best_models</span><span class="op">$</span><span class="va">xgboost_model</span>, </span>
<span>                               test_data <span class="op">=</span> <span class="va">train_output</span><span class="op">$</span><span class="va">test_data</span>, </span>
<span>                               y <span class="op">=</span> <span class="va">train_output</span><span class="op">$</span><span class="va">y</span>, </span>
<span>                               verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Explaining a single objectPreparation of a new explainer is initiated</span></span>
<span><span class="co">##   -&gt; model label       :  xgb.Booster  (  default  )</span></span>
<span><span class="co">##   -&gt; data              :  51  rows  45  cols </span></span>
<span><span class="co">##   -&gt; data              :  rownames to data was added ( from 1 to 51 ) </span></span>
<span><span class="co">##   -&gt; target variable   :  51  values </span></span>
<span><span class="co">##   -&gt; predict function  :  yhat.default will be used (  default  )</span></span>
<span><span class="co">##   -&gt; predicted values  :  No value for predict function target column. (  default  )</span></span>
<span><span class="co">##   -&gt; model_info        :  package Model of class: xgb.Booster package unrecognized , ver. Unknown , task regression (  default  ) </span></span>
<span><span class="co">##   -&gt; predicted values  :  numerical, min =  153354.1 , mean =  542672.6 , max =  1719992  </span></span>
<span><span class="co">##   -&gt; residual function :  difference between y and yhat (  default  )</span></span>
<span><span class="co">##   -&gt; residuals         :  numerical, min =  -1082630 , mean =  350.4553 , max =  959019.9  </span></span>
<span><span class="co">##   A new explainer has been created!</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FI</span> <span class="op">&lt;-</span> <span class="fu">DALEX</span><span class="fu">::</span><span class="fu"><a href="https://modeloriented.github.io/DALEX/reference/model_parts.html" class="external-link">model_parts</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span></span>
<span><span class="va">FI</span></span></code></pre></div>
<pre><code><span><span class="co">##                              variable mean_dropout_loss       label</span></span>
<span><span class="co">## 1                        _full_model_          245962.7 xgb.Booster</span></span>
<span><span class="co">## 2                    Condition_As New          195781.4 xgb.Booster</span></span>
<span><span class="co">## 3            Parish_Santa Maria Maior          218852.1 xgb.Booster</span></span>
<span><span class="co">## 4                      Condition_Used          233924.0 xgb.Booster</span></span>
<span><span class="co">## 5                            Price.M2          243458.4 xgb.Booster</span></span>
<span><span class="co">## 6                Parish_Santo Antonio          245667.9 xgb.Booster</span></span>
<span><span class="co">## 7                            Latitude          245895.1 xgb.Booster</span></span>
<span><span class="co">## 8                     Condition_other          245962.7 xgb.Booster</span></span>
<span><span class="co">## 9                        Parish_Ajuda          245962.7 xgb.Booster</span></span>
<span><span class="co">## 10                   Parish_Alcantara          245962.7 xgb.Booster</span></span>
<span><span class="co">## 11                    Parish_Alvalade          245962.7 xgb.Booster</span></span>
<span><span class="co">## 12                     Parish_Areeiro          245962.7 xgb.Booster</span></span>
<span><span class="co">## 13                     Parish_Arroios          245962.7 xgb.Booster</span></span>
<span><span class="co">## 14                       Parish_Beato          245962.7 xgb.Booster</span></span>
<span><span class="co">## 15                       Parish_Belem          245962.7 xgb.Booster</span></span>
<span><span class="co">## 16            Parish_Campo de Ourique          245962.7 xgb.Booster</span></span>
<span><span class="co">## 17                   Parish_Campolide          245962.7 xgb.Booster</span></span>
<span><span class="co">## 18                     Parish_Carnide          245962.7 xgb.Booster</span></span>
<span><span class="co">## 19                      Parish_Lumiar          245962.7 xgb.Booster</span></span>
<span><span class="co">## 20                     Parish_Olivais          245962.7 xgb.Booster</span></span>
<span><span class="co">## 21                       Parish_other          245962.7 xgb.Booster</span></span>
<span><span class="co">## 22           Parish_Parque das Nacoes          245962.7 xgb.Booster</span></span>
<span><span class="co">## 23                 Parish_Santa Clara          245962.7 xgb.Booster</span></span>
<span><span class="co">## 24     Parish_Sao Domingos de Benfica          245962.7 xgb.Booster</span></span>
<span><span class="co">## 25        PropertySubType_Apart Hotel          245962.7 xgb.Booster</span></span>
<span><span class="co">## 26             PropertySubType_Duplex          245962.7 xgb.Booster</span></span>
<span><span class="co">## 27           PropertySubType_Dwelling          245962.7 xgb.Booster</span></span>
<span><span class="co">## 28     PropertySubType_Isolated Villa          245962.7 xgb.Booster</span></span>
<span><span class="co">## 29              PropertySubType_other          245962.7 xgb.Booster</span></span>
<span><span class="co">## 30          PropertySubType_Penthouse          245962.7 xgb.Booster</span></span>
<span><span class="co">## 31             PropertySubType_Studio          245962.7 xgb.Booster</span></span>
<span><span class="co">## 32 PropertySubType_Townhouse Dwelling          245962.7 xgb.Booster</span></span>
<span><span class="co">## 33             Parish_Penha de Franca          245993.9 xgb.Booster</span></span>
<span><span class="co">## 34                            Parking          246006.0 xgb.Booster</span></span>
<span><span class="co">## 35                     Parish_Benfica          246039.0 xgb.Booster</span></span>
<span><span class="co">## 36                     Parish_Marvila          246156.5 xgb.Booster</span></span>
<span><span class="co">## 37                 Parish_Sao Vicente          246160.2 xgb.Booster</span></span>
<span><span class="co">## 38                Parish_Misericordia          246211.1 xgb.Booster</span></span>
<span><span class="co">## 39                      Condition_New          246403.5 xgb.Booster</span></span>
<span><span class="co">## 40          PropertySubType_Apartment          246786.4 xgb.Booster</span></span>
<span><span class="co">## 41                     Parish_Estrela          247317.8 xgb.Booster</span></span>
<span><span class="co">## 42        Condition_For Refurbishment          260752.4 xgb.Booster</span></span>
<span><span class="co">## 43              Parish_Avenidas Novas          267075.5 xgb.Booster</span></span>
<span><span class="co">## 44                          Longitude          271223.9 xgb.Booster</span></span>
<span><span class="co">## 45                           Bedrooms          273806.1 xgb.Booster</span></span>
<span><span class="co">## 46                          Bathrooms          370776.1 xgb.Booster</span></span>
<span><span class="co">## 47                         _baseline_          488888.1 xgb.Booster</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">FI</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_files/figure-html/FI_plot_basic-1.png" width="700"></p>
<p>However, this visualization is barely a basic one. To get the FI plot
for the best model trained, one can use the
<code>draw_feature_importance</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/draw_feature_importance.html">draw_feature_importance</a></span><span class="op">(</span><span class="va">train_output</span><span class="op">$</span><span class="va">best_models</span>, <span class="va">train_output</span><span class="op">$</span><span class="va">train_data</span>, <span class="va">train_output</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Scale for 'colour' is already present. Adding another scale for 'colour',</span></span>
<span><span class="co">## which will replace the existing scale.</span></span></code></pre>
<p><img src="Tutorial_files/figure-html/FI_plot-1.png" width="700"></p>
<p>From the above visualization, we can see that the most important
variables for the <code>xgboost</code> model were
<code>Bathrooms</code>, <code>Latitude</code>, and
<code>Longitude</code>.</p>
</div>
<div class="section level3">
<h3 id="report">Report<a class="anchor" aria-label="anchor" href="#report"></a>
</h3>
<p>The aforementioned visualizations, like many others, are also
available in ready-to-go reports implemented in the <code>report</code>
function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report.html">report</a></span><span class="op">(</span><span class="va">train_output</span>, <span class="st">'regression.pdf'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## processing file: report.Rmd</span></span></code></pre>
<pre><code><span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span>
<span></span>
<span><span class="co">## Warning in storage.mode(data) &lt;- "double": NAs introduced by coercion</span></span></code></pre>
<pre><code><span><span class="co">## Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span></code></pre>
<pre><code><span><span class="co">## Scale for 'colour' is already present. Adding another scale for 'colour',</span></span>
<span><span class="co">## which will replace the existing scale.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Number of logged events: 4</span></span></code></pre>
<pre><code><span><span class="co">## output file: report.knit.md</span></span></code></pre>
<pre><code><span><span class="co">## "C:/Program Files/RStudio/bin/quarto/bin/tools/pandoc" +RTS -K512m -RTS report.knit.md --to latex --from markdown+autolink_bare_uris+tex_math_single_backslash --output pandoc1ab46632779d.tex --lua-filter "C:\Users\AnnA\AppData\Local\R\win-library\4.2\rmarkdown\rmarkdown\lua\pagebreak.lua" --lua-filter "C:\Users\AnnA\AppData\Local\R\win-library\4.2\rmarkdown\rmarkdown\lua\latex-div.lua" --self-contained --highlight-style tango --pdf-engine pdflatex --variable graphics --variable "geometry:margin=1in"</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Output created: regression.pdf</span></span></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
