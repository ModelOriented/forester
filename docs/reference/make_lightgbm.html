<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Automated Function for Explaining LightGBM model — make_lightgbm • forester</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- dalexverse -->
<link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>






<meta property="og:title" content="Automated Function for Explaining LightGBM model — make_lightgbm" />
<meta property="og:description" content="Function make_lightgbm automates the process of applying LightGBM model
for a dataset and simutaneously creates explainer from the use of DALEX package.
The created explainer can be further processed by functions for explanations." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">forester</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">1.0.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/forester/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Automated Function for Explaining LightGBM model</h1>
    <small class="dont-index">Source: <a href='https://github.com/ModelOriented/forester/blob/master/R/make_lightgbm.R'><code>R/make_lightgbm.R</code></a></small>
    <div class="hidden name"><code>make_lightgbm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function <code>make_lightgbm</code> automates the process of applying LightGBM model
for a dataset and simutaneously creates explainer from the use of DALEX package.
The created explainer can be further processed by functions for explanations.</p>
    </div>

    <pre class="usage"><span class='fu'>make_lightgbm</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>target</span>,
  <span class='va'>type</span>,
  num_features <span class='op'>=</span> <span class='cn'>NULL</span>,
  fill_na <span class='op'>=</span> <span class='cn'>TRUE</span>,
  tune <span class='op'>=</span> <span class='cn'>FALSE</span>,
  tune_metric <span class='op'>=</span> <span class='cn'>NULL</span>,
  tune_iter <span class='op'>=</span> <span class='fl'>20</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data.frame, matrix, data.table or dgCMatrix - data will be used to run the XGBoost model. NOTE: data has to contain the target column.</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>character: name of the target column, should be character and has to be a column name in data.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character: defining the task. Two options are: "regression" and "classification", particularly, binary classification.</p></td>
    </tr>
    <tr>
      <th>num_features</th>
      <td><p>numeric, default is NULL. Parameter indicates number of most important features, which are chosen from the train dataset. Automatically, those important
features will be kept in the train and test datasets.</p></td>
    </tr>
    <tr>
      <th>fill_na</th>
      <td><p>logical, default is FALSE. If TRUE, missing values in target column are removed, missing values in categorical columns are replaced by mode and
missing values in numeric columns are substituted by median of corresponding columns.</p></td>
    </tr>
    <tr>
      <th>tune</th>
      <td><p>logical. If TRUE, function will perform the hyperparameter tuning steps for each model inside.</p></td>
    </tr>
    <tr>
      <th>tune_metric</th>
      <td><p>character, name of metric used for evaluating best model. For regression, options are: "mse", "rmse", "mad" and "r2".
For classification, options are: "auc", "recall", "precision", "f1" and "accuracy".</p></td>
    </tr>
    <tr>
      <th>tune_iter</th>
      <td><p>number (default: 20) - total number of times the optimization step is to repeated. This argument is used when tune = TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the class <code>explainer</code> for LightGBM model with given data, target and defined type of problem.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Explanatory Model Analysis. Explore, Explain and Examine Predictive Models. <a href='https://ema.drwhy.ai/'>https://ema.drwhy.ai/</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># simple explainer for regression problem</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>datasets</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dalex.drwhy.ai'>DALEX</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"iris"</span><span class='op'>)</span>
<span class='va'>EXPLAINER</span> <span class='op'>&lt;-</span> <span class='fu'>make_lightgbm</span><span class='op'>(</span><span class='va'>iris</span>,<span class='st'>"Petal.Length"</span>,type<span class='op'>=</span><span class='st'>"regression"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>--- Creating LightGBM model ---</span></div><div class='output co'>#&gt; <span class='message'>Original shape of train data frame: 150 rows, 5 columns</span></div><div class='output co'>#&gt; <span class='message'>_____________</span></div><div class='output co'>#&gt; <span class='message'>NA values</span></div><div class='output co'>#&gt; <span class='message'>There is no NA values in your data.</span></div><div class='input'>
<span class='co'>## Variable importance</span>
<span class='va'>variable_importance_gbm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dalex.drwhy.ai/reference/model_parts.html'>model_parts</a></span><span class='op'>(</span><span class='va'>EXPLAINER</span>,type<span class='op'>=</span><span class='st'>"raw"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>variable_importance_gbm</span><span class='op'>)</span>
</div><div class='img'><img src='make_lightgbm-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## Single variable:</span>
<span class='va'>sv_gbm_petal_width</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dalex.drwhy.ai/reference/model_profile.html'>model_profile</a></span><span class='op'>(</span><span class='va'>EXPLAINER</span>, variable<span class='op'>=</span><span class='st'>"Petal.Width"</span>,type<span class='op'>=</span><span class='st'>"partial"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>sv_gbm_petal_width</span><span class='op'>)</span>
</div><div class='img'><img src='make_lightgbm-2.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='co'># simple explainer for classification problem</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dalex.drwhy.ai'>DALEX</a></span><span class='op'>)</span>
<span class='co'>## We will predict the survived state: 0 and 1</span>
<span class='va'>titanic_explainer</span> <span class='op'>&lt;-</span> <span class='fu'>make_lightgbm</span><span class='op'>(</span><span class='va'>titanic_imputed</span>, <span class='st'>"survived"</span>, <span class='st'>"classification"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>--- Creating LightGBM model ---</span></div><div class='output co'>#&gt; <span class='message'>Original shape of train data frame: 2207 rows, 8 columns</span></div><div class='output co'>#&gt; <span class='message'>_____________</span></div><div class='output co'>#&gt; <span class='message'>NA values</span></div><div class='output co'>#&gt; <span class='message'>There is no NA values in your data.</span></div><div class='input'>
<span class='co'>## Assessment for model performance:</span>
<span class='fu'><a href='https://dalex.drwhy.ai/reference/model_performance.html'>model_performance</a></span><span class='op'>(</span><span class='va'>titanic_explainer</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Measures for:  classification
#&gt; recall     : 0.6427567 
#&gt; precision  : 0.8704762 
#&gt; f1         : 0.7394822 
#&gt; accuracy   : 0.8541006 
#&gt; auc        : 0.772134
#&gt; 
#&gt; Residuals:
#&gt;   0%  10%  20%  30%  40%  50%  60%  70%  80%  90% 100% 
#&gt;   -1    0    0    0    0    0    0    0    0    1    1 </div><div class='input'>
<span class='co'>## Finding important features:</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://dalex.drwhy.ai/reference/model_parts.html'>model_parts</a></span><span class='op'>(</span><span class='va'>titanic_explainer</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='make_lightgbm-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## Plot reverse cumulative distribution of module of residual</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://dalex.drwhy.ai/reference/model_performance.html'>model_performance</a></span><span class='op'>(</span><span class='va'>titanic_explainer</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='make_lightgbm-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hoang Thien Ly, Szymon Szmajdzinski, Anna Kozak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


